(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3403],{2346:(e,s,t)=>{"use strict";t.d(s,{Separator:()=>i});var a=t(5155),r=t(2115),l=t(7489),c=t(9434);let i=r.forwardRef((e,s)=>{let{className:t,orientation:r="horizontal",decorative:i=!0,...o}=e;return(0,a.jsx)(l.b,{ref:s,decorative:i,orientation:r,className:(0,c.cn)("shrink-0 bg-border","horizontal"===r?"h-[1px] w-full":"h-full w-[1px]",t),...o})});i.displayName=l.b.displayName},6490:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>T});var a=t(5155),r=t(5631),l=t(5695),c=t(9551),i=t(6766),o=t(2115),n=t(6695),d=t(965),u=t(3158),m=t(285),g=t(9434);function x(e){let{images:s,altText:t,productNameHint:r}=e,[l,c]=(0,o.useState)(0);if(!s||0===s.length){let e=r?r.split(" ")[0].toLowerCase()+" placeholder":"product placeholder";return(0,a.jsx)(n.Zp,{className:"overflow-hidden shadow-lg",children:(0,a.jsx)(n.Wu,{className:"p-0",children:(0,a.jsx)(i.default,{src:"https://placehold.co/600x600.png",alt:"No image available",width:600,height:600,className:"aspect-square object-cover w-full rounded-lg","data-ai-hint":e})})})}let x=s[l],h=x.includes("placehold.co")&&r?r.split(" ")[0].toLowerCase()+" detail":void 0;return(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)(n.Zp,{className:"overflow-hidden shadow-lg relative",children:[(0,a.jsx)(n.Wu,{className:"p-0",children:(0,a.jsx)(i.default,{src:x,alt:"".concat(t," - Image ").concat(l+1),width:600,height:600,className:"aspect-square object-cover w-full rounded-t-lg transition-opacity duration-300 ease-in-out",priority:0===l,"data-ai-hint":h})}),s.length>1&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(m.$,{variant:"outline",size:"icon",className:"absolute left-2 top-1/2 -translate-y-1/2 bg-background/70 hover:bg-background",onClick:()=>{c(e=>0===e?s.length-1:e-1)},"aria-label":"Previous image",children:(0,a.jsx)(d.A,{className:"h-6 w-6"})}),(0,a.jsx)(m.$,{variant:"outline",size:"icon",className:"absolute right-2 top-1/2 -translate-y-1/2 bg-background/70 hover:bg-background",onClick:()=>{c(e=>e===s.length-1?0:e+1)},"aria-label":"Next image",children:(0,a.jsx)(u.A,{className:"h-6 w-6"})})]})]}),s.length>1&&(0,a.jsx)("div",{className:"grid grid-cols-4 sm:grid-cols-5 gap-2",children:s.map((e,s)=>{let o=e.includes("placehold.co")&&r?r.split(" ")[0].toLowerCase()+" thumbnail":void 0;return(0,a.jsx)("button",{onClick:()=>c(s),className:(0,g.cn)("overflow-hidden rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2 transition-all",l===s?"ring-2 ring-primary ring-offset-2":"opacity-70 hover:opacity-100"),"aria-label":"View image ".concat(s+1),children:(0,a.jsx)(i.default,{src:e,alt:"".concat(t," - Thumbnail ").concat(s+1),width:100,height:100,className:"aspect-square object-cover w-full","data-ai-hint":o})},s)})})]})}var h=t(2346),p=t(704);let f=p.bL,j=o.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(p.B8,{ref:s,className:(0,g.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...r})});j.displayName=p.B8.displayName;let N=o.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(p.l9,{ref:s,className:(0,g.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t),...r})});N.displayName=p.l9.displayName;let v=o.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(p.UC,{ref:s,className:(0,g.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...r})});v.displayName=p.UC.displayName;var b=t(5977);let k=o.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(b.bL,{ref:s,className:(0,g.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",t),...r})});k.displayName=b.bL.displayName;let w=o.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(b._V,{ref:s,className:(0,g.cn)("aspect-square h-full w-full",t),...r})});w.displayName=b._V.displayName;let y=o.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(b.H4,{ref:s,className:(0,g.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...r})});y.displayName=b.H4.displayName;var P=t(462),D=t(7374),R=t(6438),A=t(8046),C=t(4815),E=t(3054),I=t(960),q=t(4063),S=t(4469),O=t(2523),B=t(7481);function T(){var e;let{addItem:s}=(0,S._)(),t=(0,l.useParams)().id,{toast:i}=(0,B.dj)(),[d,u]=(0,o.useState)(null),[g,p]=(0,o.useState)(1),[b,T]=(0,o.useState)(!0);(0,o.useEffect)(()=>{if(console.log("ProductDetailsPage: useEffect triggered for productIdFromParams: ".concat(t)),T(!0),t){let e=(0,r.y9)(t);console.log("ProductDetailsPage: Fetched product from mock data:",JSON.stringify(e,null,2)),e?(u(e),e.stock<=0?(p(0),console.log("ProductDetailsPage: Product out of stock, setting quantity to 0.")):(p(1),console.log("ProductDetailsPage: Product in stock, setting quantity to 1."))):(console.warn("ProductDetailsPage: Product not found for ID:",t),u(null))}else console.warn("ProductDetailsPage: productIdFromParams is undefined in useEffect."),u(null);T(!1)},[t]);let z=e=>{d&&p(s=>{let t=s+e;return t<1&&d.stock>0?1:t<0&&0===d.stock?0:t>d.stock?d.stock:t})},Z=e=>[,,,,,].fill(null).map((s,t)=>(0,a.jsx)(P.A,{className:"h-5 w-5 ".concat(t<e?"text-yellow-400 fill-yellow-400":"text-muted-foreground")},t));if(b)return(0,a.jsx)("div",{className:"flex justify-center items-center min-h-[60vh]",children:(0,a.jsx)("div",{className:"text-xl text-muted-foreground",children:"Cargando detalles del producto..."})});d||(console.error("ProductDetailsPage: Product is null after loading, rendering notFound."),(0,l.notFound)());let L=b||!d||d.stock<=0||g<=0||d&&g>d.stock;return(0,a.jsxs)("div",{className:"space-y-10",children:[(0,a.jsx)(c.z,{title:d.name,description:"Categor\xeda: ".concat(d.category)}),(0,a.jsxs)("div",{className:"grid md:grid-cols-2 gap-8 lg:gap-12",children:[(0,a.jsx)("div",{children:(0,a.jsx)(x,{images:d.images,altText:d.name,productNameHint:d.name})}),(0,a.jsx)("div",{className:"space-y-6",children:(0,a.jsxs)(n.Zp,{className:"shadow-lg",children:[(0,a.jsx)(n.aR,{children:(0,a.jsx)(n.ZB,{className:"text-2xl text-primary",children:d.name})}),(0,a.jsxs)(n.Wu,{className:"space-y-4",children:[(0,a.jsxs)("p",{className:"text-3xl font-bold text-foreground",children:[d.currency||"$",d.price.toFixed(2)]}),(0,a.jsxs)("div",{className:"font-medium text-sm flex items-center mt-4",children:[(0,a.jsx)(D.A,{className:"h-4 w-4 mr-2 text-muted-foreground"}),"Stock disponible: ",(0,a.jsxs)("span",{className:"font-bold ml-1",children:[d.stock," unidades"]})]}),(0,a.jsx)("p",{className:"text-muted-foreground",children:d.description}),d.brand&&(0,a.jsxs)("p",{className:"text-sm",children:[(0,a.jsx)("span",{className:"font-semibold",children:"Marca:"})," ",d.brand]}),d.sku&&(0,a.jsxs)("p",{className:"text-sm",children:[(0,a.jsx)("span",{className:"font-semibold",children:"SKU:"})," ",d.sku]}),d.stock>0?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3 mt-2",children:[(0,a.jsx)(m.$,{variant:"outline",size:"icon",onClick:()=>z(-1),disabled:g<=1,children:(0,a.jsx)(R.A,{className:"h-4 w-4"})}),(0,a.jsx)(O.p,{type:"number",value:g.toString(),onChange:e=>{if(!d)return;let s=parseInt(e.target.value,10);if(isNaN(s)){p(+(d.stock>0));return}s<1&&d.stock>0?s=1:s<0&&0===d.stock?s=0:s>d.stock&&(s=d.stock),p(s)},onBlur:()=>{d&&(g<1&&d.stock>0?p(1):0===d.stock&&0!==g?p(0):g<0&&0===d.stock?p(0):g>d.stock&&p(d.stock))},min:+(d.stock>0),max:d.stock,className:"w-16 text-center h-10",disabled:0===d.stock}),(0,a.jsx)(m.$,{variant:"outline",size:"icon",onClick:()=>z(1),disabled:g>=d.stock,children:(0,a.jsx)(A.A,{className:"h-4 w-4"})})]}),(0,a.jsxs)(m.$,{size:"lg",className:"w-full mt-4",onClick:()=>{if(console.log("ProductDetailsPage: ===== handleAddToCart TRIGGERED ====="),console.log("ProductDetailsPage: isLoading:",b),console.log("ProductDetailsPage: product state:",JSON.stringify(d,null,2)),console.log("ProductDetailsPage: quantity state:",g),b){console.warn("ProductDetailsPage: Add to cart called while product details are loading. ABORTING."),i({title:"Cargando...",description:"Espere a que carguen los detalles del producto.",variant:"default"});return}if(!d||void 0===d.id||void 0===d.stock||void 0===d.price||void 0===d.name){console.error("ProductDetailsPage: Product data is not available or incomplete. ABORTING.",JSON.stringify(d,null,2)),i({title:"Error de Producto",description:"Datos del producto no disponibles o incompletos. Intente recargar la p\xe1gina.",variant:"destructive"});return}if(console.log("ProductDetailsPage: Stock check: product.stock = ".concat(d.stock)),d.stock<=0){console.warn("ProductDetailsPage: Product ".concat(d.name," is out of stock. ABORTING.")),i({title:"Producto Agotado",description:"".concat(d.name," no tiene stock disponible."),variant:"destructive"});return}if(console.log("ProductDetailsPage: Quantity check: quantity = ".concat(g)),g<=0){console.warn("ProductDetailsPage: Quantity is zero or less. Cannot add to cart. ABORTING."),i({title:"Cantidad Inv\xe1lida",description:"Por favor, seleccione una cantidad mayor a cero.",variant:"destructive"});return}if(console.log("ProductDetailsPage: Requested quantity vs stock: quantity = ".concat(g,", product.stock = ").concat(d.stock)),g>d.stock){console.warn("ProductDetailsPage: Requested quantity ".concat(g," exceeds available stock ").concat(d.stock,". ABORTING.")),i({title:"Stock Insuficiente",description:"No puede a\xf1adir m\xe1s de ".concat(d.stock," unidades de ").concat(d.name,"."),variant:"destructive"});return}let e={id:d.id,name:d.name,price:d.price,stock:d.stock,images:d.images,category:d.category,description:d.description,currency:d.currency,longDescription:d.longDescription,featured:d.featured,specifications:d.specifications,reviews:d.reviews,sku:d.sku,brand:d.brand,tags:d.tags};console.log("ProductDetailsPage: All checks passed. Calling addItem with productToAdd:",JSON.stringify(e,null,2),"and quantity: ".concat(g));try{s(e,g),console.log("ProductDetailsPage: addItem function call has been COMPLETED.")}catch(e){console.error("ProductDetailsPage: ERROR during addItem call:",e),i({title:"Error Inesperado",description:"Ocurri\xf3 un error al a\xf1adir al carrito.",variant:"destructive"})}},disabled:L,children:[(0,a.jsx)(C.A,{className:"mr-2 h-5 w-5"}),"A\xf1adir al Carrito"]})]}):(0,a.jsx)("p",{className:"mt-4 p-3 bg-muted text-muted-foreground rounded-md text-center",children:"Este producto est\xe1 agotado."}),d.tags&&d.tags.length>0&&(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsx)("h4",{className:"font-semibold text-sm mb-1",children:"Etiquetas:"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:d.tags.map(e=>(0,a.jsxs)("span",{className:"px-2 py-1 text-xs bg-secondary text-secondary-foreground rounded-md flex items-center",children:[(0,a.jsx)(E.A,{className:"h-3 w-3 mr-1"})," ",e]},e))})]})]})]})})]}),(0,a.jsx)(h.Separator,{}),(0,a.jsxs)(f,{defaultValue:"description",className:"w-full",children:[(0,a.jsxs)(j,{className:"grid w-full grid-cols-1 sm:grid-cols-3 mb-6",children:[(0,a.jsxs)(N,{value:"description",children:[(0,a.jsx)(I.A,{className:"mr-2 h-4 w-4"}),"Descripci\xf3n"]}),(0,a.jsxs)(N,{value:"specifications",children:[(0,a.jsx)(I.A,{className:"mr-2 h-4 w-4"}),"Especificaciones"]}),(0,a.jsxs)(N,{value:"reviews",children:[(0,a.jsx)(q.A,{className:"mr-2 h-4 w-4"}),"Rese\xf1as (",(null===(e=d.reviews)||void 0===e?void 0:e.length)||0,")"]})]}),(0,a.jsx)(v,{value:"description",children:(0,a.jsxs)(n.Zp,{children:[(0,a.jsx)(n.aR,{children:(0,a.jsx)(n.ZB,{children:"Detalles del Producto"})}),(0,a.jsx)(n.Wu,{className:"prose prose-sm max-w-none dark:prose-invert text-foreground",children:d.longDescription||d.description})]})}),(0,a.jsx)(v,{value:"specifications",children:(0,a.jsxs)(n.Zp,{children:[(0,a.jsx)(n.aR,{children:(0,a.jsx)(n.ZB,{children:"Especificaciones"})}),(0,a.jsx)(n.Wu,{children:d.specifications&&d.specifications.length>0?(0,a.jsx)("ul",{className:"space-y-2",children:d.specifications.map(e=>(0,a.jsxs)("li",{className:"flex justify-between border-b pb-2",children:[(0,a.jsxs)("span",{className:"font-medium text-muted-foreground",children:[e.key,":"]}),(0,a.jsx)("span",{className:"text-foreground",children:e.value})]},e.key))}):(0,a.jsx)("p",{className:"text-muted-foreground",children:"No hay especificaciones disponibles para este producto."})})]})}),(0,a.jsx)(v,{value:"reviews",children:(0,a.jsxs)(n.Zp,{children:[(0,a.jsx)(n.aR,{children:(0,a.jsx)(n.ZB,{children:"Rese\xf1as de Clientes"})}),(0,a.jsx)(n.Wu,{className:"space-y-6",children:d.reviews&&d.reviews.length>0?d.reviews.map(e=>(0,a.jsxs)("div",{className:"border-b pb-4 last:border-b-0 last:pb-0",children:[(0,a.jsxs)("div",{className:"flex items-center mb-2",children:[(0,a.jsxs)(k,{className:"h-10 w-10 mr-3",children:[(0,a.jsx)(w,{src:e.avatarUrl||"https://placehold.co/40x40.png?text=".concat(e.author.charAt(0)),alt:e.author,"data-ai-hint":"avatar person"}),(0,a.jsx)(y,{children:e.author.charAt(0)})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-semibold text-foreground",children:e.author}),(0,a.jsxs)("div",{className:"flex items-center",children:[Z(e.rating),(0,a.jsx)("span",{className:"ml-2 text-xs text-muted-foreground",children:new Date(e.date).toLocaleDateString()})]})]})]}),(0,a.jsx)("p",{className:"text-sm text-foreground",children:e.comment})]},e.id)):(0,a.jsx)("p",{className:"text-muted-foreground",children:"No hay rese\xf1as para este producto todav\xeda."})})]})})]})]})}},8543:(e,s,t)=>{Promise.resolve().then(t.bind(t,6490))},9551:(e,s,t)=>{"use strict";t.d(s,{z:()=>r});var a=t(5155);function r(e){let{title:s,description:t,className:r}=e;return(0,a.jsxs)("div",{className:"mb-8 ".concat(null!=r?r:""),children:[" ",(0,a.jsx)("h1",{className:"text-3xl font-bold tracking-tight text-foreground sm:text-4xl",children:s}),t&&(0,a.jsxs)("div",{className:"mt-2 text-lg text-muted-foreground",children:[" ",t]})]})}}},e=>{var s=s=>e(e.s=s);e.O(0,[2848,8135,1450,9488,5185,647,8441,1684,7358],()=>s(8543)),_N_E=e.O()}]);