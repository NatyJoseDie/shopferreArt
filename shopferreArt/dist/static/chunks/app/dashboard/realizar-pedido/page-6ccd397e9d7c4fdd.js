(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[452],{285:(e,t,s)=>{"use strict";s.d(t,{$:()=>d,r:()=>c});var a=s(5155),i=s(2115),r=s(9708),n=s(2085),o=s(9434);let c=(0,n.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=i.forwardRef((e,t)=>{let{className:s,variant:i,size:n,asChild:d=!1,...l}=e,u=d?r.DX:"button";return(0,a.jsx)(u,{className:(0,o.cn)(c({variant:i,size:n,className:s})),ref:t,...l})});d.displayName="Button"},2070:(e,t,s)=>{"use strict";s.d(t,{W:()=>r});var a=s(5155),i=s(6126);function r(e){let{stock:t}=e;return t<=0?(0,a.jsx)(i.E,{variant:"destructive",className:"absolute top-2 left-2 z-10 bg-pink-500 text-white border-pink-500 text-xs px-2 py-1 shadow-lg",children:"SIN STOCK"}):null}},2346:(e,t,s)=>{"use strict";s.d(t,{Separator:()=>o});var a=s(5155),i=s(2115),r=s(7489),n=s(9434);let o=i.forwardRef((e,t)=>{let{className:s,orientation:i="horizontal",decorative:o=!0,...c}=e;return(0,a.jsx)(r.b,{ref:t,decorative:o,orientation:i,className:(0,n.cn)("shrink-0 bg-border","horizontal"===i?"h-[1px] w-full":"h-full w-[1px]",s),...c})});o.displayName=r.b.displayName},2523:(e,t,s)=>{"use strict";s.d(t,{p:()=>n});var a=s(5155),i=s(2115),r=s(9434);let n=i.forwardRef((e,t)=>{let{className:s,type:i,...n}=e;return(0,a.jsx)("input",{type:i,className:(0,r.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:t,...n})});n.displayName="Input"},5057:(e,t,s)=>{"use strict";s.d(t,{J:()=>d});var a=s(5155),i=s(2115),r=s(968),n=s(2085),o=s(9434);let c=(0,n.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=i.forwardRef((e,t)=>{let{className:s,...i}=e;return(0,a.jsx)(r.b,{ref:t,className:(0,o.cn)(c(),s),...i})});d.displayName=r.b.displayName},6126:(e,t,s)=>{"use strict";s.d(t,{E:()=>o});var a=s(5155);s(2115);var i=s(2085),r=s(9434);let n=(0,i.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function o(e){let{className:t,variant:s,...i}=e;return(0,a.jsx)("div",{className:(0,r.cn)(n({variant:s}),t),...i})}},7262:(e,t,s)=>{"use strict";s.d(t,{S:()=>c});var a=s(5155),i=s(2115),r=s(6981),n=s(518),o=s(9434);let c=i.forwardRef((e,t)=>{let{className:s,...i}=e;return(0,a.jsx)(r.bL,{ref:t,className:(0,o.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",s),...i,children:(0,a.jsx)(r.C1,{className:(0,o.cn)("flex items-center justify-center text-current"),children:(0,a.jsx)(n.A,{className:"h-4 w-4"})})})});c.displayName=r.bL.displayName},7342:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>w});var a=s(5155),i=s(2115),r=s(6766),n=s(6874),o=s.n(n),c=s(9551),d=s(285),l=s(6695),u=s(2523),m=s(2346),p=s(7262),x=s(5057),f=s(7481),h=s(5631),g=s(9592),v=s(4301),b=s(7223),j=s(4815),N=s(8856),y=s(2070);function w(){let[e,t]=(0,i.useState)([]),[s,n]=(0,i.useState)([]),[w,S]=(0,i.useState)(!0),[A,E]=(0,i.useState)(!1),{toast:k}=(0,f.dj)();(0,i.useEffect)(()=>{let e;S(!0);let s=localStorage.getItem("masterProductList");if(s)try{e=JSON.parse(s)}catch(t){console.error("Error parsing masterProductList from localStorage",t),e=(0,h.AS)()}else e=(0,h.AS)();t(e),S(!1)},[]);let T=e=>1.2*e,D=e=>{if(e.stock<=0){k({title:"Producto sin stock",description:"".concat(e.name," no est\xe1 disponible actualmente."),variant:"destructive"});return}let t=T(e.price);n(s=>s.find(t=>t.product.id===e.id)?s.map(t=>t.product.id===e.id?{...t,quantity:Math.min(t.quantity+1,e.stock)}:t):[...s,{product:e,quantity:1,priceAtAddition:t}]),k({title:"".concat(e.name," a\xf1adido al carrito!"),description:"Precio unitario: $".concat(t.toLocaleString("es-AR",{minimumFractionDigits:2,maximumFractionDigits:2}))})},O=(e,t)=>{var a;let i=null===(a=s.find(t=>t.product.id===e))||void 0===a?void 0:a.product;if(!i)return;if(t<1){C(e);return}let r=Math.min(t,i.stock);n(t=>t.map(t=>t.product.id===e?{...t,quantity:r}:t))},C=e=>{n(t=>t.filter(t=>t.product.id!==e)),k({title:"Producto eliminado del carrito",variant:"destructive"})},I=(0,i.useMemo)(()=>s.reduce((e,t)=>e+t.priceAtAddition*t.quantity,0),[s]);return w?(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)(c.z,{title:"Realizar Pedido",description:"Selecciona los productos que deseas pedir."}),(0,a.jsx)(d.$,{variant:"outline",asChild:!0,className:"mb-6",children:(0,a.jsxs)(o(),{href:"/dashboard/vista-cliente",children:[(0,a.jsx)(g.A,{className:"mr-2 h-4 w-4"}),"Volver al Portal Cliente"]})}),(0,a.jsxs)("div",{className:"grid md:grid-cols-3 gap-6",children:[(0,a.jsxs)("div",{className:"md:col-span-2 space-y-4",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold",children:"Productos Disponibles"}),Array.from({length:6}).map((e,t)=>(0,a.jsx)(l.Zp,{className:"animate-pulse",children:(0,a.jsxs)(l.Wu,{className:"flex items-center justify-between p-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)(N.E,{className:"h-16 w-16 rounded-md"}),(0,a.jsxs)("div",{children:[(0,a.jsx)(N.E,{className:"h-5 w-32 mb-1"}),(0,a.jsx)(N.E,{className:"h-4 w-20"})]})]}),(0,a.jsx)(N.E,{className:"h-9 w-24 rounded-md"})]})},t))]}),(0,a.jsxs)("div",{className:"md:col-span-1 space-y-4",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold",children:"Tu Carrito"}),(0,a.jsxs)(l.Zp,{className:"animate-pulse",children:[(0,a.jsx)(l.aR,{children:(0,a.jsx)(N.E,{className:"h-6 w-24"})}),(0,a.jsxs)(l.Wu,{className:"space-y-3",children:[(0,a.jsx)(N.E,{className:"h-4 w-full"}),(0,a.jsx)(N.E,{className:"h-4 w-3/4"})]}),(0,a.jsxs)(l.wL,{className:"flex justify-between items-center",children:[(0,a.jsx)(N.E,{className:"h-5 w-16"}),(0,a.jsx)(N.E,{className:"h-9 w-28 rounded-md"})]})]})]})]})]}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)(c.z,{title:"Realizar Pedido",description:"Selecciona los productos que deseas pedir. Los precios mostrados son tus precios de compra."}),(0,a.jsx)(d.$,{variant:"outline",asChild:!0,className:"mb-6",children:(0,a.jsxs)(o(),{href:"/dashboard/vista-cliente",children:[(0,a.jsx)(g.A,{className:"mr-2 h-4 w-4"}),"Volver al Portal Cliente"]})}),(0,a.jsxs)("div",{className:"grid md:grid-cols-3 gap-6 items-start",children:[(0,a.jsxs)("div",{className:"md:col-span-2 space-y-4",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold",children:"Productos Disponibles"}),e.length>0?e.map(e=>{let t=T(e.price),s=e.images&&e.images.length>0?e.images[0]:"https://placehold.co/100x100.png?text=No+Img",i=s.includes("placehold.co")?e.category.toLowerCase()+" "+e.name.split(" ")[0].toLowerCase():void 0;return(0,a.jsx)(l.Zp,{className:"shadow",children:(0,a.jsxs)(l.Wu,{className:"flex items-center justify-between p-3 sm:p-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 sm:gap-4",children:[(0,a.jsxs)("div",{className:"relative w-16 h-16",children:[(0,a.jsx)(r.default,{src:s,alt:e.name,fill:!0,sizes:"64px",className:"rounded-md border object-cover aspect-square","data-ai-hint":i}),(0,a.jsx)(y.W,{stock:e.stock})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold text-sm sm:text-base",children:e.name}),(0,a.jsxs)("p",{className:"text-primary font-medium text-sm sm:text-base",children:["$",t.toLocaleString("es-AR",{minimumFractionDigits:2,maximumFractionDigits:2})]})]})]}),(0,a.jsxs)(d.$,{size:"sm",onClick:()=>D(e),disabled:e.stock<=0,children:[(0,a.jsx)(v.A,{className:"mr-2 h-4 w-4"})," A\xf1adir"]})]})},e.id)}):(0,a.jsx)("p",{className:"text-muted-foreground",children:"No hay productos disponibles para cargar."})]}),(0,a.jsxs)("div",{className:"md:col-span-1 space-y-4 sticky top-24",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold",children:"Tu Carrito"}),(0,a.jsxs)(l.Zp,{className:"shadow-lg",children:[(0,a.jsx)(l.aR,{children:(0,a.jsx)(l.ZB,{children:"Resumen del Pedido"})}),(0,a.jsx)(l.Wu,{className:"space-y-3 max-h-[calc(100vh-200px)] overflow-y-auto",children:0===s.length?(0,a.jsx)("p",{className:"text-muted-foreground text-center py-4",children:"Tu carrito est\xe1 vac\xedo."}):s.map(e=>(0,a.jsxs)("div",{className:"flex justify-between items-center border-b pb-2 last:border-b-0 last:pb-0",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-sm",children:e.product.name}),(0,a.jsxs)("p",{className:"text-xs text-muted-foreground",children:["$",e.priceAtAddition.toLocaleString("es-AR",{minimumFractionDigits:2,maximumFractionDigits:2})," c/u"]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(u.p,{type:"number",value:e.quantity,min:"1",max:e.product.stock,onChange:t=>O(e.product.id,parseInt(t.target.value,10)),className:"w-16 h-8 text-sm p-1"}),(0,a.jsx)(d.$,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>C(e.product.id),children:(0,a.jsx)(b.A,{className:"h-4 w-4 text-destructive"})})]})]},e.product.id))}),s.length>0&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(m.Separator,{}),(0,a.jsxs)(l.Wu,{className:"pt-4 space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(p.S,{id:"officialInvoice",checked:A,onCheckedChange:e=>E(e)}),(0,a.jsx)(x.J,{htmlFor:"officialInvoice",className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"Solicitar Factura Oficial"})]}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Si no se marca, se generar\xe1 un Remito X como comprobante de entrega."})]}),(0,a.jsxs)(l.wL,{className:"flex flex-col gap-3 pt-4",children:[(0,a.jsxs)("div",{className:"flex justify-between w-full font-semibold text-lg",children:[(0,a.jsx)("span",{children:"Total:"}),(0,a.jsxs)("span",{children:["$",I.toLocaleString("es-AR",{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),(0,a.jsxs)(d.$,{className:"w-full",onClick:()=>{if(0===s.length){k({title:"Carrito vac\xedo",description:"A\xf1ade productos antes de enviar el pedido.",variant:"destructive"});return}let e={items:s.map(e=>({productId:e.product.id,productName:e.product.name,quantity:e.quantity,unitPrice:e.priceAtAddition,totalPrice:e.priceAtAddition*e.quantity})),totalAmount:I,invoiceOption:A?"Factura Oficial":"Remito X",timestamp:new Date().toISOString()};console.log("Pedido Enviado (simulado):",e),k({title:"Pedido Enviado (Simulaci\xf3n)",description:"Total: $".concat(I.toLocaleString("es-AR",{minimumFractionDigits:2,maximumFractionDigits:2}),". Opci\xf3n de comprobante: ").concat(e.invoiceOption,". (Esto es una simulaci\xf3n, el pedido no se ha procesado realmente)."),duration:5e3}),n([]),E(!1)},size:"lg",children:[(0,a.jsx)(j.A,{className:"mr-2 h-5 w-5"})," Enviar Pedido"]}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground text-center mt-2",children:"Nota: El env\xedo del pedido es una simulaci\xf3n. En una aplicaci\xf3n real, se conectar\xeda a un sistema de gesti\xf3n."})]})]})]})]})]})]})}},7481:(e,t,s)=>{"use strict";s.d(t,{dj:()=>m});var a=s(2115);let i=0,r=new Map,n=e=>{if(r.has(e))return;let t=setTimeout(()=>{r.delete(e),l({type:"REMOVE_TOAST",toastId:e})},1e6);r.set(e,t)},o=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:s}=t;return s?n(s):e.toasts.forEach(e=>{n(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===s||void 0===s?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},c=[],d={toasts:[]};function l(e){d=o(d,e),c.forEach(e=>{e(d)})}function u(e){let{...t}=e,s=(i=(i+1)%Number.MAX_SAFE_INTEGER).toString(),a=()=>l({type:"DISMISS_TOAST",toastId:s});return l({type:"ADD_TOAST",toast:{...t,id:s,open:!0,onOpenChange:e=>{e||a()}}}),{id:s,dismiss:a,update:e=>l({type:"UPDATE_TOAST",toast:{...e,id:s}})}}function m(){let[e,t]=a.useState(d);return a.useEffect(()=>(c.push(t),()=>{let e=c.indexOf(t);e>-1&&c.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>l({type:"DISMISS_TOAST",toastId:e})}}},7836:(e,t,s)=>{Promise.resolve().then(s.bind(s,7342))},8856:(e,t,s)=>{"use strict";s.d(t,{E:()=>r});var a=s(5155),i=s(9434);function r(e){let{className:t,...s}=e;return(0,a.jsx)("div",{className:(0,i.cn)("animate-pulse rounded-md bg-muted",t),...s})}},9551:(e,t,s)=>{"use strict";s.d(t,{z:()=>i});var a=s(5155);function i(e){let{title:t,description:s,className:i}=e;return(0,a.jsxs)("div",{className:"mb-8 ".concat(null!=i?i:""),children:[" ",(0,a.jsx)("h1",{className:"text-3xl font-bold tracking-tight text-foreground sm:text-4xl",children:t}),s&&(0,a.jsxs)("div",{className:"mt-2 text-lg text-muted-foreground",children:[" ",s]})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[2848,6874,8135,1062,5185,8441,1684,7358],()=>t(7836)),_N_E=e.O()}]);